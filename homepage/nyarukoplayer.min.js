var nyarukoplayer_conffile="",nyarukoplayer_consolelog=!0,nyarukoplayer_cnlrc=!0,nyarukoplayer_lrctime=0,nyarukoplayer_titlelrc=!1,nyarukoplayer_imgtype="",nyarukoplayer_webp=!0,nyarukoplayer_imgdir="",nyarukoplayer_musicbtnimg="",nyarukoplayer_lrcfile="",nyarukoplayer_musicfile="",nyarukoplayer_musicblock="",nyarukoplayer_replay=!0,nyarukoplayerCallback_AnimateStart=null,nyarukoplayerCallback_AnimateEnd=null,nyarukoplayerCallback_LyricEnd=null,nyarukoplayerCallback_ConfigurationLoaded=null,nyarukoplayerCallback_ImageLoaded=
null,nyarukoplayerCallback_LyricsLoaded=null,nyarukoplayerCallback_MusicLanguageblock=null,nyarukoplayerCallback_MusicDisabled=null,nyarukoplayerCallback_Error=null,nyarukoplayerCallback_MusicPlay=null,nyarukoplayerCallback_MusicPause=null,nyarukoplayerCallback_AnimateReady=null,nyarukoplayer_imgcache=[],nyarukoplayer_from=[],nyarukoplayer_to=[],nyarukoplayer_width=[],nyarukoplayer_height=[],nyarukoplayer_time=[],nyarukoplayer_count=0,nyarukoplayer_loaded=0,nyarukoplayer_now=0,nyarukoplayer_lrcoldtime=
0,nyarukoplayer_lrc=null,nyarukoplayer_webpok=!1,nyarukoplayer_lrctimer=null,nyarukoplayer_lrctimers="",nyarukoplayer_lrctimeri=0,nyarukoplayer_autoplay=!0,nyarukoplayer_musicready=!1,nyarukoplayer_waitload=!1,nyarukoplayer_playd=!1,nyarukoplayer_retaincount=0,nyarukoplayer_errord=!1;
function nyarukoplayer_init(a,c){nyarukoplayer_conffile=a;if(nyarukoplayer_consolelog=void 0===c?!0:c)console.log("[nyarukoplayer.js] v2.0\nPowered by KagurazakaYashi"),console.log("[NyarukoPlayer] Downloading configuration...");try{$.getJSON(nyarukoplayer_conffile,function(a,b,c,l){"error"==b&&(nyarukoplayer_consolelog&&console.error("[NyarukoPlayer] Download configuration failed. "+c.status+": "+c.statusText),nyarukoplayer_error());"success"==b&&(a=c.responseJSON,b=a[0],b.cnlrc&&(nyarukoplayer_cnlrc=
b.cnlrc),b.lrctime&&(nyarukoplayer_lrctime=b.lrctime),b.titlelrc&&(nyarukoplayer_titlelrc=b.titlelrc),b.imgtype&&(nyarukoplayer_imgtype=b.imgtype),b.webp&&(nyarukoplayer_webp=b.webp),b.imgdir&&(nyarukoplayer_imgdir=b.imgdir),b.musicbtnimg&&(nyarukoplayer_musicbtnimg=b.musicbtnimg),b.lrcfile&&(nyarukoplayer_lrcfile=b.lrcfile),b.musicfile&&(nyarukoplayer_musicfile=b.musicfile),b.musicblock&&(nyarukoplayer_musicblock=b.musicblock),b.replay&&(nyarukoplayer_replay=b.replay),b.autoplay&&(nyarukoplayer_autoplay=
b.autoplay),a=a[1],datdatacount=a.length,nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Download configuration. "+datdatacount+": "+c.status+": "+c.statusText),nyarukoplayer_animationinit(a))})}catch(d){nyarukoplayer_consolelog&&console.error("Data loading failed: "+d),nyarukoplayer_error()}}
function nyarukoplayer_animationinit(a){$.ajaxSetup({error:function(a,b){nyarukoplayer_consolelog&&console.error("Data loading failed: "+b);nyarukoplayer_error();return!1}});var c=nyarukoplayer_browserok();null!=c?nyarukoplayer_error(c):(nyarukoplayer_webpok=nyarukoplayer_checkWebpSupport(),"true"==$.cookie("disable")?(nyarukoplayer_consolelog&&console.warn("[NyarukoPlayer] Disabled by cookie."),$("#nyarukoplayer_loading").remove(),$("#titlebox").css("background","transparent")):(nyarukoplayer_count=
a.length,nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Configuration loaded."),$.isFunction(nyarukoplayerCallback_ConfigurationLoaded)&&nyarukoplayerCallback_ConfigurationLoaded(),nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Loading images..."),$.each(a,function(a,b){nyarukoplayer_webp&&nyarukoplayer_webpok&&(nyarukoplayer_imgtype="webp");imgurl=nyarukoplayer_imgdir+b[0]+"."+nyarukoplayer_imgtype;nyarukoplayer_width[a]=b[1];nyarukoplayer_height[a]=b[2];nyarukoplayer_from[a]=b[3];
nyarukoplayer_to[a]=b[4];nyarukoplayer_time[a]=b[5];nimg=new Image;nimg.src=imgurl;nimg.onload=function(){nyarukoplayer_imgcache[a]=$(this);nyarukoplayer_loaded++;var b=nyarukoplayer_loaded/nyarukoplayer_count*100;nyarukoplayer_consolelog&&console.log("Loading... "+nyarukoplayer_loaded+"/"+nyarukoplayer_count+" : "+b+"%");var c=$("#nyarukoplayer_loadingok");nyarukoplayer_errord||c.html("\u8f7d\u5165\u4e2d "+b.toFixed(0)+"%");c.css("width",b+"%");nyarukoplayer_loaded==nyarukoplayer_count&&(nyarukoplayer_consolelog&&
console.log("[NyarukoPlayer] Image Loaded."),$.isFunction(nyarukoplayerCallback_ImageLoaded)&&nyarukoplayerCallback_ImageLoaded(),0!=$("#nyarukoplayer_audiodiv").length&&0!=$("#nyarukoplayer_musiccontrol")?($("#nyarukoplayer_audiodiv").css("background","url('"+nyarukoplayer_musicbtnimg+"') no-repeat"),nyarukoplayer_autoplay?nyarukoplayer_musicdiglog_open():nyarukoplayer_musicready=!0):(nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] \u6ca1\u6709\u5bfc\u5165\u76f8\u5173 div \u6216 \u64ad\u653e\u5730\u533a/\u8bed\u8a00\u9650\u5236\uff0c\u65e0\u6cd5\u64ad\u653e\u97f3\u9891\u3002"),
nyarukoplayer_ready()),nyarukoplayer_preplay(),nyarukoplayer_waitload&&nyarukoplayer_playnow(!1))};nimg.onerror=function(){nyarukoplayer_consolelog&&console.error("[NyarukoPlayer] Picture loading failed");nyarukoplayer_error()}}),nyarukoplayer_lrcfile&&nyarukoplayer_musicfile&&(nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Downloading lyric..."),$.ajax({url:nyarukoplayer_lrcfile,dataType:"text",success:function(a){nyarukoplayer_audioinit(a)}})),$(window).resize(function(){nyarukoplayer_resizeendimg()})))}
function nyarukoplayer_playnow(a){nyarukoplayer_cplaynow=void 0===a?!0:a;if(0==nyarukoplayer_loaded||nyarukoplayer_loaded!=nyarukoplayer_count)return nyarukoplayer_waitload=!0,!1;if(nyarukoplayer_autoplay||nyarukoplayer_musicready)if(3!=nyarukoplayer_musicdiglog_open()){if(nyarukoplayer_playd){nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Has started, no need to start again.");return}nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Image Play.");nyarukoplayer_playd=!0;nyarukoplayer_play()}else nyarukoplayer_autoplay=
!0;$.isFunction(nyarukoplayerCallback_AnimateStart)&&nyarukoplayerCallback_AnimateStart();return!0}function nyarukoplayer_preplay(){$("#nyarukoplayer_loading").remove();nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Ready.");$.isFunction(nyarukoplayerCallback_AnimateReady)&&nyarukoplayerCallback_AnimateReady(nyarukoplayer_autoplay)}
function nyarukoplayer_ready(){0!=$("#nyarukoplayer")?nyarukoplayer_autoplay&&nyarukoplayer_playnow(!1):(nyarukoplayer_consolelog&&console.error("[NyarukoPlayer] Unable to play animation without importing related div."),$("#titlebox").css("background","transparent"))}
function nyarukoplayer_playmusic(a){nyarukoplayer_playd&&nyarukoplayer_cplaynow?nyarukoplayer_cplaynow=!1:a?document.getElementById("nyarukoplayer_musiccontrol").paused&&(nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Music Play."),$("#nyarukoplayer_audiodiv").css("animation","change 2s linear infinite"),document.getElementById("nyarukoplayer_musiccontrol").play(),$.isFunction(nyarukoplayerCallback_MusicPlay)&&nyarukoplayerCallback_MusicPlay()):document.getElementById("nyarukoplayer_musiccontrol").paused||
(nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Music Pause."),$("#nyarukoplayer_audiodiv").css("animation","none"),document.getElementById("nyarukoplayer_musiccontrol").pause(),$.isFunction(nyarukoplayerCallback_MusicPause)&&nyarukoplayerCallback_MusicPause())}
function nyarukoplayer_error(a){a=void 0===a?"\u4e00\u4e9b\u8d44\u6e90\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u5237\u65b0\u518d\u8bd5\u3002":a;nyarukoplayer_errord=!0;$("#nyarukoplayer_loadingok").css({width:"100%","background-color":"#FF0033",background:"linear-gradient(#FF6666, #FF0033)","text-align":"center"});$("#nyarukoplayer_loadingok").html(a);$("#titlebox").css("background","transparent");$.isFunction(nyarukoplayerCallback_Error)&&nyarukoplayerCallback_Error(a)}
function nyarukoplayer_play(a){if(void 0===a||!a)if(0==nyarukoplayer_retaincount)nyarukoplayer_retaincount++;else return;$("#nyarukoplayer").append('<div class="nyarukodiv"></div>');var c=$(".nyarukodiv"),d=nyarukoplayer_width[nyarukoplayer_now],b=nyarukoplayer_height[nyarukoplayer_now];c.append(nyarukoplayer_imgcache[nyarukoplayer_now]);var k=nyarukoplayer_to[nyarukoplayer_now];a=1E3*nyarukoplayer_time[nyarukoplayer_now];var l=nyarukoplayer_frame(nyarukoplayer_from[nyarukoplayer_now],d,b);d=nyarukoplayer_frame(k,
d,b);c.css({left:l[0],top:l[1],width:l[2],height:l[3]});c.animate({left:d[0],top:d[1],width:d[2],height:d[3]},a,function(){nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] IMG "+(nyarukoplayer_now+1)+"/"+nyarukoplayer_count);nyarukoplayer_now<nyarukoplayer_count-1?(nyarukoplayer_now++,c.remove(),nyarukoplayer_play(!0)):(nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Animate End."),$.isFunction(nyarukoplayerCallback_AnimateEnd)&&nyarukoplayerCallback_AnimateEnd(),nyarukoplayer_replay&&
(nyarukoplayer_now=0,c.remove(),nyarukoplayer_play(!0)))})}
function nyarukoplayer_frame(a,c,d){var b=$("#nyarukoplayer").width(),k=$("#nyarukoplayer").height(),l=0,e=0,f=0,g=0,m=c/d;"L"==a?(l=0,f=m*k,f<b&&(f=b),g=f/m,e=(k-g)/2):"R"==a?(f=m*k,f<b&&(f=b),l=b-f,g=f/m,e=(k-g)/2):"U"==a?(e=0,g=b/m,g<k&&(g=k),f=g*m,l=(b-f)/2):"D"==a?(g=b/m,g<k&&(g=k),f=g*m,e=k-g,l=(b-f)/2):"C"==a?(a=nyarukoplayer_imgcenter(c,d,b,k),l=a[0],e=a[1],f=a[2],g=a[3]):"B"==a?(b-c>k-d?(f=1.2*b,g=f/m):(g=1.2*k,f=g*m),l=(b-f)/2,e=(k-g)/2):"S"==a&&(b-c>k-d?(f=.8*b,g=f/m):(g=.8*k,f=g*m),l=
(b-f)/2,e=(k-g)/2);nyarukoplayer_consolelog&&console.log(l+","+e+","+f+","+g+","+m);return[l,e,f,g]}function nyarukoplayer_resizeendimg(){var a=$("#nyarukoplayer").width(),c=$("#nyarukoplayer").height();a=nyarukoplayer_imgcenter(nyarukoplayer_width[nyarukoplayer_now],nyarukoplayer_height[nyarukoplayer_now],a,c);x=a[0];y=a[1];w=a[2];h=a[3];$(".nyarukodiv").css({left:x,top:y,width:w,height:h})}
function nyarukoplayer_imgcenter(a,c,d,b){d=$("#nyarukoplayer").width();b=$("#nyarukoplayer").height();var k=0,l=0,e=a/c;a=d-a;var f=b-c,g=a/f;if(a>f){c=d;var m=c/e;l=(b-m)/2}else m=b,c=m*e,k=(d-c)/2;1<e?1.01<g&&g<e&&(a<f?(c=d,m=c/e,l=(b-m)/2,k=0):(m=b,c=m*e,k=(d-c)/2,l=0)):g>e&&1>g&&(a<f?(c=d,m=c/e,l=(b-m)/2,k=0):(m=b,c=m*e,k=(d-c)/2,l=0));return[k,l,c,m]}
function nyarukoplayer_audioinit(a){if("true"==$.cookie("disable"))nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Disabled by user."),$.isFunction(nyarukoplayerCallback_MusicDisabled)&&nyarukoplayerCallback_MusicDisabled();else{if(""!=nyarukoplayer_musicblock&&"true"!=$.cookie("nochkarea"))for(var c=navigator.language.substr(0,2),d=nyarukoplayer_musicblock.split("|"),b=0;b<d.length;b++)if(d[b]==c){nyarukoplayer_consolelog&&console.warn("[NyarukoPlayer] \u5bf9\u4e0d\u8d77\uff0c\u60a8\u6240\u5728\u7684\u5730\u533a\u4e0d\u80fd\u64ad\u653e\u8fd9\u9996\u80cc\u666f\u97f3\u4e50 \u3053\u306e\u30da\u30fc\u30b8\u306f\u304a\u4f4f\u307e\u3044\u306e\u5730\u57df\u304b\u3089\u3054\u5229\u7528\u306b\u306a\u308c\u307e\u305b\u3093 Cannot use this page from the area to live");
$("#nyarukoplayer_audiodiv").remove();$.isFunction(nyarukoplayerCallback_MusicLanguageblock)&&nyarukoplayerCallback_MusicLanguageblock();return}$("#nyarukoplayer_musiccontrol").html('<source src="'+nyarukoplayer_musicfile+'" />');var k=document.getElementById("nyarukoplayer_musiccontrol");c=$("#nyarukoplayer_audiodiv");setTimeout(function(){k.pause()},100);c.click(function(){document.getElementById("nyarukoplayer_musiccontrol").paused?nyarukoplayer_playmusic(!0):(nyarukoplayer_playmusic(!1),$("#nyarukoplayer_lrc").html(""))});
if(a){a=a.split("\n");for(var l=/\[\d{2}:\d{2}.\d{2}\]/g,e=[];!l.test(a[0]);)lineslines=a.slice(1);0===a[a.length-1].length&&a.pop();a.forEach(function(a,b,c){b=a.match(l);var f=a.replace(l,"");b.forEach(function(a,b,c){a=a.slice(1,-1).split(":");e.push([60*parseInt(a[0],10)+parseFloat(a[1]),f])})});a=0;for(c=e.length;a<c;a++)for(d=0;d<c;d++)e[a][0]<e[d][0]&&(b=e[d],e[d]=e[a],e[a]=b);nyarukoplayer_lrc=[];for(b=0;b<e.length;b++)c=e[b][1],c=""==c?["",""]:c.split("|"),nyarukoplayer_lrc[b]=[e[b][0]+nyarukoplayer_lrctime,
c[0],c[1]];k.ontimeupdate=function(){for(var a=0,b=nyarukoplayer_lrc.length;a<b;a++){if(-1==nyarukoplayer_lrcoldtime)if(1>this.currentTime)nyarukoplayer_lrcoldtime=0;else break;var c=nyarukoplayer_lrc[a][0];if(this.currentTime>c&&nyarukoplayer_lrcoldtime<c){nyarukoplayer_lrcoldtime=this.currentTime;var d="";d=nyarukoplayer_cnlrc&&nyarukoplayer_lrc[a][2]?nyarukoplayer_lrc[a][2]:nyarukoplayer_lrc[a][1];"END"==d&&(d="",nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Lyric End."),nyarukoplayer_lrcoldtime=
-1,$.isFunction(nyarukoplayerCallback_LyricEnd)&&nyarukoplayerCallback_LyricEnd());if($("#nyarukoplayer_lrc").html()!=d){nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] LRC "+a+"/"+b+"|"+this.currentTime+"/"+c);var e=$("#nyarukoplayer_lrc");document.hidden?e.text(d):e.fadeTo(200,0,function(){nyarukoplayer_lrctimers=d;e.text("");nyarukoplayer_lrctimer=setInterval(function(){document.getElementById("nyarukoplayer_musiccontrol").paused?(clearInterval(nyarukoplayer_lrctimer),nyarukoplayer_lrctimeri=
0,nyarukoplayer_lrctimers=""):(e.append(nyarukoplayer_lrctimers.charAt(nyarukoplayer_lrctimeri)),nyarukoplayer_lrctimeri++===nyarukoplayer_lrctimers.length&&(clearInterval(nyarukoplayer_lrctimer),nyarukoplayer_lrctimeri=0))},100);e.fadeTo(0,1,null)});nyarukoplayer_titlelrc&&(document.title="\u266a"+d)}break}}};$("#nyarukoplayer_lrc").click(function(){(nyarukoplayer_cnlrc=!nyarukoplayer_cnlrc)?$(this).html("(\u5207\u6362\u4e3a\u4e2d\u6587\u6b4c\u8bcd...)"):$(this).html("(\u5207\u6362\u4e3a\u539f\u7248\u6b4c\u8bcd...)")});
nyarukoplayer_consolelog&&console.log("[NyarukoPlayer] Lyrics loaded.");$.isFunction(nyarukoplayerCallback_LyricsLoaded)&&nyarukoplayerCallback_LyricsLoaded()}}}function nyarukoplayer_nochkarea(a){$.cookie("nochkarea",void 0===a?!1:a,{expires:365});location.reload(!1)}function nyarukoplayer_disable(a){$.cookie("disable",void 0===a?!1:a,{expires:365});location.reload(!1)}
function nyarukoplayer_musicdiglog_close(){$("#nyarukoplayer_musicdiglog").animate({left:"200%"},1E3,function(){$("#nyarukoplayer_musicdiglog").remove()})}function nyarukoplayer_musicdiglog_nomusic(){setTimeout(function(){nyarukoplayer_musicdiglog_close();nyarukoplayer_ready()},500)}
function nyarukoplayer_musicdiglog_open(){if(0!=$("#nyarukoplayer_musicdiglog").length||nyarukoplayer_playd)return-1;if(!nyarukoplayer_lrcfile||!nyarukoplayer_musicfile)return nyarukoplayer_musicdiglog_nomusic(),2;var a=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);if(a||"1"!=$.cookie("playmusic")){if(a||"2"!=$.cookie("playmusic")){var c='<div id="nyarukoplayer_musicdiglog"><h1>\u8981\u5f00\u542f\u80cc\u666f\u97f3\u4e50\u5417\uff1f</h1><p><a id="nyarukoplayer_musicdiglog_yes">\u64ad\u653e(\u63a8\u8350)</a></p><p><a id="nyarukoplayer_musicdiglog_no">\u4e0d\u8981\u64ad\u653e</a></p>';
a||(c+='<p><input type="checkbox" id="nyarukoplayer_musicdiglog_save" value="1" checked="checked" />\u4eca\u65e5\u4e0d\u518d\u8be2\u95ee</p>');c+="</div>";$("body").append(c);$("#nyarukoplayer_musicdiglog_yes").click(function(){!a&&$("#nyarukoplayer_musicdiglog_save").prop("checked")&&$.cookie("playmusic","1",{expires:1});nyarukoplayer_playmusic(!0);nyarukoplayer_musicdiglog_close();nyarukoplayer_ready();nyarukoplayer_play()});$("#nyarukoplayer_musicdiglog_no").click(function(){!a&&$("#nyarukoplayer_musicdiglog_save").prop("checked")&&
$.cookie("playmusic","2",{expires:1});nyarukoplayer_musicdiglog_close();nyarukoplayer_ready();nyarukoplayer_play()});return 3}nyarukoplayer_musicdiglog_nomusic();return 2}setTimeout(function(){nyarukoplayer_playmusic(!0);nyarukoplayer_musicdiglog_close();nyarukoplayer_ready()},500);return 1}function nyarukoplayer_checkWebpSupport(){var a=document.createElement("canvas");return a.getContext&&a.getContext("2d")?0===a.toDataURL("image/webp").indexOf("data:image/webp"):!1}
function nyarukoplayer_browserok(){var a=navigator.userAgent.toLowerCase(),c="";/ie/.test(a)&&(c="IE");/opera/.test(a)&&(c="Opera");return""==c?null:"\u62b1\u6b49,\u6682\u4e0d\u652f\u6301"+c+",\u5efa\u8bae\u4f7f\u7528\u6700\u65b0\u7248Chrome\u3002"};
